<!DOCTYPE HTML>
<html>
    <head>
        <title>Test Embed</title>
    </head>
    <body>
        <textarea id="script" cols="80" rows="20"></textarea>
        <br>
        <button onclick="processLink()">Process</button>
        <br>
        <textarea id="link" cols="80" rows="20"></textarea>
        <br>
        <a href="javascript:void(0)" id = "hyperlink">Test Video</a>
    </body>
    <script>
        function processLink(){
            var script = document.getElementById("script").value;
            var flashvars = JSON.parse("{"+script.match(/("flashvars")+(.*)+\}/g)[0]);
            console.log(flashvars);
            console.log("Processing");
            var templateString = `https://cdnapisec.kaltura.com/p/1157612/sp/115761200/embedIframeJs/uiconf_id/29018071/partner_id/1157612?iframeembed=true&playerId=kaltura_player&entry_id=${flashvars["entry_id"]}&flashvars[streamerType]=auto&flashvars[mediaProxy.mediaPlayTo]=${flashvars.flashvars["mediaProxy.mediaPlayTo"]}&flashvars[mediaProxy.mediaPlayFrom]=${flashvars.flashvars["mediaProxy.mediaPlayFrom"]}&flashvars[localizationCode]=en&flashvars[leadWithHTML5]=true&flashvars[sideBarContainer.plugin]=true&flashvars[sideBarContainer.position]=left&flashvars[sideBarContainer.clickToClose]=true&flashvars[chapters.plugin]=true&flashvars[chapters.layout]=vertical&flashvars[chapters.thumbnailRotator]=false&flashvars[streamSelector.plugin]=true&flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&flashvars[dualScreen.plugin]=true&&wid=0_oqubdp28`;
            document.getElementById("link").value = templateString;
            document.getElementById("hyperlink").href = templateString;
            
        }
    </script>
</html>
